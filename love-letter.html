<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Envelope Letter</title>
<style>
body {
  background-color: #fff5e6;
  font-family: 'Segoe UI', sans-serif;
  overflow-x: hidden;
  margin: 0;
  padding: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
}

/* Envelope container */
#envelope-container {
  position: relative;
  width: 300px;
  margin-top: 100px;
  cursor: pointer;
}

/* Envelope body */
#envelope {
  width: 100%;
  height: 180px;
  background-color: #f9c5c8;
  border-radius: 0 0 12px 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.2);
  position: relative;
  z-index: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 1.2rem;
  text-align: center;
}

/* Flap - inverted */
#flap {
  width: 0;
  height: 0;
  border-left: 150px solid transparent;
  border-right: 150px solid transparent;
  border-top: 80px solid #f594a2;
  position: absolute;
  top: 0;
  left: 0;
  z-index: 2;
  transition: transform 0.5s;
  transform-origin: top center;
}

/* Letter inside */
#letter {
  display: none;
  width: 90%;
  max-width: 450px;
  max-height: 80vh;
  background: #fff0f5;
  border: 3px dashed #f9c5c8;
  border-radius: 16px;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 25px;
  box-shadow: 0 8px 30px rgba(0,0,0,0.4);
  position: relative;
  word-wrap: break-word;
}

/* Close button */
#closeLetter {
  position: sticky;
  top: 0;
  background: #f9c5c8;
  border: none;
  border-radius: 6px;
  padding: 5px 10px;
  cursor: pointer;
  margin-bottom: 10px;
}

/* Flowers */
.flower {
  width: 50px;
  height: 50px;
  position: absolute;
  cursor: grab;
  z-index: 1000;
  transition: transform 0.2s ease, opacity 0.5s, filter 0.5s;
}
.flower:active {
  transform: scale(1.2);
}
.flower.watered {
  filter: brightness(1.6) drop-shadow(0 0 20px hotpink);
  opacity: 1;
}

/* Warning + Pot */
#warning {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  background: pink;
  padding: 20px;
  border-radius: 10px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
  display: none;
  z-index: 2000;
  font-size: 18px;
  font-weight: bold;
}

#watering-pot {
  position: fixed;
  bottom: 20px;
  left: 20px;
  width: 80px;
  height: 80px;
  cursor: grab;
  display: none;
  z-index: 2000;
}

/* Success message */
#success-message {
  position: fixed;
  bottom: 30px;
  left: 50%;
  transform: translateX(-50%);
  background: lightgreen;
  padding: 15px 25px;
  border-radius: 10px;
  font-size: 18px;
  font-weight: bold;
  display: none;
  z-index: 3000;
  opacity: 1;
  transition: opacity 1s ease;
}

/* Punishment */
#punishment {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: black;
  color: red;
  font-size: 30px;
  font-weight: bold;
  display: none;
  z-index: 5000;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  animation: fadeIn 1s ease forwards;
}
#punishment img {
  max-width: 70%;
  margin-top: 20px;
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
</style>
</head>
<body>

<div id="envelope-container">
  <div id="flap"></div>
  <div id="envelope">Click to Open ðŸ’Œ</div>
</div>

<div id="letter">
  <button id="closeLetter">Close âœ–</button>
  <div class="letter-content">
    <p>Dear you,</p>
    <p>This is your scrollable cream letter. Write as much as you want, it will scroll endlessly!</p>
  </div>
</div>

<!-- Warning + pot + success -->
<div id="warning">ðŸ’§ Water the flowers or else...</div>
<img id="watering-pot" src="https://static.vecteezy.com/system/resources/previews/011/887/663/original/hand-drawn-watering-pot-illustration-png.png" alt="Watering Pot">
<div id="success-message">Phew that was close, thank you ðŸŒ¸</div>

<!-- Punishment -->
<div id="punishment">
  <p>You shouldnâ€™t have done that...</p>
  <img src="papa.jpg" alt="Old Man" style="width:400px; height:auto;">
</div>

<!-- ALL FLOWERS -->
<img class="flower draggable" src="https://static.vecteezy.com/system/resources/previews/029/285/704/original/pink-flower-pink-flower-pink-flower-clipart-pink-flower-with-transparent-background-ai-generative-free-png.png"  style="width:80px; height:80px;">
<img class="flower draggable" src="https://static.vecteezy.com/system/resources/previews/029/285/704/original/pink-flower-pink-flower-pink-flower-clipart-pink-flower-with-transparent-background-ai-generative-free-png.png" style="width:80px; height:80px;">
<img class="flower draggable" src="https://png.pngtree.com/png-clipart/20231109/original/pngtree-pink-flower-cute-png-image_13522448.png" style="width:60px; height:60px;">
<img class="flower draggable" src="https://png.pngtree.com/png-clipart/20231109/original/pngtree-pink-flower-cute-png-image_13522448.png" style="width:60px; height:60px;">
<img class="flower draggable" src="https://www.pngarts.com/files/3/Pink-Flowers-PNG-Image.png">
<img class="flower draggable" src="https://www.pngarts.com/files/3/Pink-Flowers-PNG-Image.png">
<img class="flower draggable" src="https://png.pngtree.com/png-clipart/20231002/original/pngtree-pink-flower-isolate-png-file-png-image_13064989.png">
<img class="flower draggable" src="https://png.pngtree.com/png-clipart/20231002/original/pngtree-pink-flower-isolate-png-file-png-image_13064989.png">
<img class="flower draggable" src="https://ecuadorflowersandmore.com/wp-content/uploads/2022/12/DSC00256-1366x1366.png" style="width:70px; height:70px;">
<img class="flower draggable" src="https://ecuadorflowersandmore.com/wp-content/uploads/2022/12/DSC00256-1366x1366.png" style="width:70px; height:70px;">
<img class="flower draggable" src="https://static.vecteezy.com/system/resources/previews/039/244/999/non_2x/blooming-single-pink-gerbera-daisy-flower-free-png.png">
<img class="flower draggable" src="https://static.vecteezy.com/system/resources/previews/039/244/999/non_2x/blooming-single-pink-gerbera-daisy-flower-free-png.png">
<img class="flower draggable" src="https://i.pinimg.com/originals/84/fb/6f/84fb6f065dd268ad8e398553d7a27810.png" style="width:200px; height:200px;">
<img class="flower draggable" src="https://www.pngarts.com/files/3/Pink-Flowers-PNG-Photo.png">
<img class="flower draggable" src="https://png.pngtree.com/png-clipart/20231020/original/pngtree-blooming-pink-hibiscus-flower-on-isolated-background-png-image_13384486.png" style="width:60px; height:60px;">

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.2/dist/confetti.browser.min.js"></script>
<script>
// Elements
const envelopeContainer = document.getElementById('envelope-container');
const envelope = document.getElementById('envelope');
const flap = document.getElementById('flap');
const letter = document.getElementById('letter');
const closeLetter = document.getElementById('closeLetter');
const warning = document.getElementById("warning");
const pot = document.getElementById("watering-pot");
const successMessage = document.getElementById("success-message");
const punishment = document.getElementById("punishment");
const flowers = document.querySelectorAll('.flower');

let wateredCount = 0;
let punished = false;

// Envelope open
envelopeContainer.addEventListener('click', () => {
  flap.style.transform = 'rotateX(180deg)';
  setTimeout(() => {
    envelope.style.display = 'none';
    letter.style.display = 'block';
    confetti({
      particleCount: 400,
      spread: 250,
      origin: { y: 0.6 },
      colors: ['#f9c5c8','#ffccd5','#fff4e6','#FF69B4','#FF1493']
    });
  }, 500);
});

// Close letter
closeLetter.addEventListener('click', () => {
  letter.style.display = 'none';
  envelope.style.display = 'flex';
  flap.style.transform = 'rotateX(0deg)';
});

// Show warning + pot after 2 min
setTimeout(() => {
  if (!punished) {
    warning.style.display = "block";
    pot.style.display = "block";
    // Give them 30s to water
    setTimeout(() => {
      if (wateredCount < flowers.length && !punished) {
        punishment.style.display = "flex";
        punished = true;
      }
    }, 20000);
  }
}, 120);

// Drag pot to water flowers (mouse + touch)
function startDrag(pageX, pageY) {
  const shiftX = pageX - pot.getBoundingClientRect().left;
  const shiftY = pageY - pot.getBoundingClientRect().top;

  function moveAt(x, y) {
    pot.style.left = x - shiftX + "px";
    pot.style.top = y - shiftY + "px";

    // Watering logic
    flowers.forEach(flower => {
      const flowerRect = flower.getBoundingClientRect();
      const potRect = pot.getBoundingClientRect();

      if (!(potRect.right < flowerRect.left ||
            potRect.left > flowerRect.right ||
            potRect.bottom < flowerRect.top ||
            potRect.top > flowerRect.bottom)) {
        if (!flower.classList.contains("watered")) {
          flower.classList.add("watered");
          wateredCount++;

          // Glow effect
          flower.style.filter = "brightness(1.6) drop-shadow(0 0 20px hotpink)";
          flower.style.transition = "transform 0.5s ease, filter 0.5s ease";
          flower.style.transform += " scale(1.3)";
          setTimeout(() => {
            flower.style.transform = flower.style.transform.replace(" scale(1.3)", "");
          }, 600);

          // Remove glow after 5 seconds
          setTimeout(() => {
            flower.style.filter = "";
            flower.classList.remove("watered");
          }, 5000);

          if (wateredCount === flowers.length) {
            successMessage.style.display = "block";
            setTimeout(() => { successMessage.style.opacity = 0; }, 20000);
            setTimeout(() => { successMessage.style.display = "none"; }, 30000);
            warning.style.display = "none";
            pot.style.display = "none";
          }
        }
      }
    });
  }

  function onMouseMove(e) {
    moveAt(e.pageX, e.pageY);
  }
  function onTouchMove(e) {
    moveAt(e.touches[0].clientX, e.touches[0].clientY);
  }

  document.addEventListener("mousemove", onMouseMove);
  document.addEventListener("touchmove", onTouchMove);

  function stopDrag() {
    document.removeEventListener("mousemove", onMouseMove);
    document.removeEventListener("mouseup", stopDrag);
    document.removeEventListener("touchmove", onTouchMove);
    document.removeEventListener("touchend", stopDrag);
  }

  document.addEventListener("mouseup", stopDrag);
  document.addEventListener("touchend", stopDrag);
}

pot.onmousedown = (e) => startDrag(e.pageX, e.pageY);
pot.ontouchstart = (e) => {
  e.preventDefault();
  startDrag(e.touches[0].clientX, e.touches[0].clientY);
};
pot.ondragstart = () => false;


// Draggable + floating flowers
// Draggable + floating flowers
flowers.forEach(flower => {
  // Random starting position
  flower.style.top = Math.random() * (window.innerHeight - 50) + 'px';
  flower.style.left = Math.random() * (window.innerWidth - 50) + 'px';

  function startFlowerDrag(pageX, pageY) {
    let shiftX = pageX - flower.getBoundingClientRect().left;
    let shiftY = pageY - flower.getBoundingClientRect().top;

    function moveAt(x, y) {
      flower.style.left = x - shiftX + 'px';
      flower.style.top = y - shiftY + 'px';
    }

    function onMouseMove(e) {
      moveAt(e.pageX, e.pageY);
    }
    function onTouchMove(e) {
      moveAt(e.touches[0].clientX, e.touches[0].clientY);
    }

    document.addEventListener('mousemove', onMouseMove);
    document.addEventListener('touchmove', onTouchMove);

    function stopDrag() {
      document.removeEventListener('mousemove', onMouseMove);
      document.removeEventListener('mouseup', stopDrag);
      document.removeEventListener('touchmove', onTouchMove);
      document.removeEventListener('touchend', stopDrag);
    }

    document.addEventListener('mouseup', stopDrag);
    document.addEventListener('touchend', stopDrag);
  }

  flower.addEventListener('mousedown', (e) => startFlowerDrag(e.pageX, e.pageY));
  flower.addEventListener('touchstart', (e) => {
    e.preventDefault();
    startFlowerDrag(e.touches[0].clientX, e.touches[0].clientY);
  });

  flower.ondragstart = () => false;

  // Floating effect (keep as is)
  let dx = (Math.random() - 0.5) * 0.5;
  let dy = (Math.random() - 0.5) * 0.5;
  let rotation = Math.random() * 360;
  let rotationSpeed = (Math.random() - 0.5) * 0.5;

  setInterval(() => {
    if (!flower.matches(':active')) {
      let top = parseFloat(flower.style.top);
      let left = parseFloat(flower.style.left);

      if (top + dy < 0 || top + dy > window.innerHeight - 50) dy = -dy;
      if (left + dx < 0 || left + dx > window.innerWidth - 50) dx = -dx;

      flower.style.top = top + dy + 'px';
      flower.style.left = left + dx + 'px';

      rotation += rotationSpeed;
      flower.style.transform = `rotate(${rotation}deg)`;
    }
  }, 20);
});

  // Floating
  let dx = (Math.random() - 0.5) * 0.5;
  let dy = (Math.random() - 0.5) * 0.5;
  let rotation = Math.random() * 360;
  let rotationSpeed = (Math.random() - 0.5) * 0.5;

  setInterval(() => {
    if (!flower.matches(':active')) {
      let top = parseFloat(flower.style.top);
      let left = parseFloat(flower.style.left);

      if (top + dy < 0 || top + dy > window.innerHeight - 50) dy = -dy;
      if (left + dx < 0 || left + dx > window.innerWidth - 50) dx = -dx;

      flower.style.top = top + dy + 'px';
      flower.style.left = left + dx + 'px';

      rotation += rotationSpeed;
      flower.style.transform = `rotate(${rotation}deg)`;
    }
  }, 20);
});
</script>
</body>
</html
